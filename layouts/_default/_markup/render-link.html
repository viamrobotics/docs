{{if or (in .Text "here") (in .Text "www") (in .Text "https") }}{{- errorf "Link text is too non-descriptive: %q" .Text -}}{{ end }}<a href="{{ if and (hasPrefix .Destination "/") (site.GetPage "/") }}{{ with site.GetPage "/" }}{{.RelPermalink | safeURL}}{{end}}{{substr .Destination 1}}{{else}}{{if (hasPrefix .Destination "/") }}{{ warnf "Link may not stage correctly - please tell Naomi: %s" .Destination}}{{end}}{{ .Destination | safeURL }}{{end}}"{{ with .Title}} title="{{ . }}"{{ end }}{{ if or (strings.HasPrefix .Destination "http") (strings.HasPrefix .Destination "https") }} target="_blank"{{ end }} >{{ .Text | safeHTML }}</a>